# 内核线程的内存描述符

内核线程进运行在内核态，因此，他们永远不会访问低与`TASK_SIZE`的地址。与普通进程相反，内核线程不用线性区，因此内存描述符的很对字段对内核线程是没有意义的。

为了避免无用的tlb和高数缓存刷新，内核线程使用一组最近运行的普通进程的页表。结果在每个进程描述符中包含两种内存描述符指针：`mm`和`activate_mm`。

进程描述符中的mm字段指向进程所拥有的内存描述符，而`activate_mm`字段指向进程运行时所使用的内存描述符。对于普通进程而言，这两个字段存放相同的指针。但是，内核线程不拥有任何内存描述符，因此他们的`mm`字段总是为`NULL`，当线程得以运行时，他的`activate_mm`字段被初始化为前一个运行进程的`activate_mm`的值。

然而事情有点复杂，只要处于内核态的线程为'高端线性地址'（高于TASK_SIZE 内核地址）修改了页表项，那么，他就也应该更新系统中所有进程页表集合中相应的页表项。事实上，映射应该对内核态的其他所有的进程都有效。涉及到所有进程的页表集合是相当费时的操作，因此，linux采用延时的方式